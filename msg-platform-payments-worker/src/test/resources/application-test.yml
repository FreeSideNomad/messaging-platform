micronaut:
  application:
    name: msg-platform-payments-worker-test
  server:
    port: -1  # Random port for integration tests
  caches:
    default:
      initial-capacity: 10

datasources:
  default:
    url: jdbc:h2:mem:paymentdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: ''
    dialect: POSTGRES
    schema-generate: NONE
    maximum-pool-size: 10

jms:
  consumers:
    enabled: true

db:
  dialect: H2  # Used by @Requires(property = "db.dialect", value = "H2")

# Test environment marker
test:
  active: true

# Disable unnecessary services for testing
logger:
  levels:
    org.apache.activemq: WARN
    jakarta.jms: DEBUG
    com.acme.payments: DEBUG
    org.flywaydb: INFO
