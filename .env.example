# Application Configuration - API
API_PORT=8080

# Application Configuration - Worker
WORKER_PORT=9090
WORKER_ID=worker-1

# Performance Tuning - Netty Thread Pools
# API: Higher for handling many concurrent requests (400)
# Worker: Higher for processing messages at scale (400)
NETTY_WORKER_THREADS_API=400
NETTY_WORKER_THREADS_WORKER=400
NETTY_PARENT_THREADS_API=32
NETTY_PARENT_THREADS=8

# Performance Tuning - HikariCP Connection Pool
# Formula: (core_count Ã— 2) + effective_spindle_count
# API: 150 connections (balanced for high throughput)
# Worker: 150 connections (balanced for high throughput)
HIKARI_MAX_POOL_SIZE_API=150
HIKARI_MAX_POOL_SIZE_WORKER=150
HIKARI_MIN_IDLE=50

# PostgreSQL Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=payments
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# IBM MQ Configuration (for Java code compatibility)
MQ_HOST=ibmmq
MQ_PORT=1414
MQ_QMGR=QM1
MQ_CHANNEL=DEV.APP.SVRCONN
MQ_USER=app
MQ_PASS=passw0rd

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# JMS Configuration
# API: Disabled (only receives HTTP requests)
# Worker: Enabled (consumes from MQ)
JMS_CONSUMERS_ENABLED_API=false
JMS_CONSUMERS_ENABLED_WORKER=true
JMS_CONCURRENCY=200

# Sync Wait Configuration (0s = fully async mode, 1s = wait for response)
SYNC_WAIT_DURATION=0s

# Outbox Sweep Interval (how often to check for unpublished outbox entries)
OUTBOX_SWEEP_INTERVAL=1s

# Outbox Claim Timeout (how long before reclaiming stuck CLAIMED messages)
OUTBOX_CLAIM_TIMEOUT=1s

# JVM Performance Tuning
# Heap: 2GB max, 1GB initial
# Stack: 512KB per thread (optimized for many threads)
# GC: G1 with 200ms max pause time
JAVA_OPTS="-Xmx2g -Xms1g -Xss512k -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseStringDeduplication"

# Docker Platform Configuration
# For ARM64 (Apple Silicon): linux/arm64
# For AMD64 (Intel/AMD): linux/amd64
DOCKER_PLATFORM=linux/amd64

# IBM MQ Image Configuration
# For ARM64 (Apple Silicon): use your local image ibm-mqadvanced-server-dev:9.4.4.0-arm64
# For AMD64 (Intel/AMD): use public image icr.io/ibm-messaging/mq:9.4.4.0-r1
IBM_MQ_IMAGE=icr.io/ibm-messaging/mq:9.4.4.0-r1