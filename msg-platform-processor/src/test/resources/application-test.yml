micronaut:
  application:
    name: msg-platform-processor-test
  server:
    port: -1  # Random port for tests

datasources:
  default:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: ''
    dialect: POSTGRES
    schema-generate: CREATE_DROP
    maximum-pool-size: 10
    minimum-idle: 2

db:
  dialect: H2

flyway:
  datasources:
    default:
      enabled: true  # Enable for integration tests

# JMS Configuration for embedded ActiveMQ
jms:
  connection-factory-jndi-name: ConnectionFactory
  client-id: processor-test-client

# ActiveMQ transport configuration for embedded broker
activemq:
  pool:
    enabled: true
    max-connections: 8
    idle-timeout: 30000  # 30 seconds
    expiry-timeout: 0     # No expiry for test messages

# Test environment settings
test:
  active: true
